var Y=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var ee=Object.prototype.hasOwnProperty;var te=(u,k)=>()=>(u&&(k=u(u=0)),k);var G=(u,k,F,x)=>{if(k&&typeof k=="object"||typeof k=="function")for(let E of V(k))!ee.call(u,E)&&E!==F&&Y(u,E,{get:()=>k[E],enumerable:!(x=Q(k,E))||x.enumerable});return u},X=(u,k,F)=>(G(u,k,"default"),F&&G(F,k,"default"));var ne=u=>G(Y({},"__esModule",{value:!0}),u);var U={};import*as lt from"async_hooks";var z=te(()=>{X(U,lt)});import{__getNamedExports as _e}from"../../../../../__next-on-pages-dist__/webpack/26df63ef8f6dd468813d90c00f151653.js";import{__getNamedExports as re}from"../../../../../__next-on-pages-dist__/webpack/1175.js";import{__getNamedExports as ae}from"../../../../../__next-on-pages-dist__/webpack/1d2470119d4f846d0a077893f2422c32.js";import{__getNamedExports as se}from"../../../../../__next-on-pages-dist__/webpack/73a23316e6943b71c3775abd2b4c802e.js";import{__getNamedExports as ce}from"../../../../../__next-on-pages-dist__/webpack/7f9c4cac928c3718390c1c777cb83bc3.js";import{__getNamedExports as oe}from"../../../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var g=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/generate-image/status/[taskId]"),M=_e(g,g,g),ue=M.__chunk_6195,ie=M.__chunk_2067,pe=M.__chunk_5558,he=M.__chunk_5303,ke=M.__chunk_5228,le=re(g,g,g),de=le.__chunk_1175,Z=ae(g,g,g),ge=Z.__chunk_9985,fe=Z.__chunk_4155,h=se(g,g,g),me=h.__chunk_1730,xe=h.__chunk_3818,Ee=h.__chunk_7037,be=h.__chunk_5577,ye=h.__chunk_1863,ve=h.__chunk_3039,Ne=h.__chunk_9573,Pe=h.__chunk_7701,Ie=h.__chunk_662,Oe=h.__chunk_7444,Ae=h.__chunk_4591,we=h.__chunk_932,je=h.__chunk_5234,Re=h.__chunk_2561,Ce=h.__chunk_2988,Se=h.__chunk_2039,Te=h.__chunk_5028,$e=h.__chunk_9548,De=h.__chunk_6914,Fe=h.__chunk_7960,Le=h.__chunk_5996,Ue=h.__chunk_4337,i=ce(g,g,g),Me=i.__chunk_5405,Ke=i.__chunk_7322,Be=i.__chunk_2296,He=i.__chunk_4101,qe=i.__chunk_6776,Ge=i.__chunk_8042,Xe=i.__chunk_3665,We=i.__chunk_6991,Ye=i.__chunk_8816,ze=i.__chunk_6631,Ze=i.__chunk_4828,Je=i.__chunk_828,Qe=i.__chunk_5927,Ve=i.__chunk_6202,et=i.__chunk_4363,tt=i.__chunk_8264,nt=i.__chunk_1583,_t=i.__chunk_7908,rt=i.__chunk_8949,at=i.__chunk_796,st=i.__chunk_1651,ct=i.__chunk_5105,ot=i.__chunk_9642,ut=i.__chunk_8819,it=i.__chunk_676,J=oe(g,g,g),pt=J.__NEXT_FONT_MANIFEST,ht=J.__REACT_LOADABLE_MANIFEST,bt=((u,k,F)=>(k._ENTRIES={},u.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-ab9b5bdd0084cc23.js","static/chunks/fd9d1056-b6bd4111191f2b98.js","static/chunks/30-831c6f736de22b6a.js","static/chunks/main-app-197e90683a538661.js"],pages:{"/_app":["static/chunks/webpack-ab9b5bdd0084cc23.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-8267e90745dfb882.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-ab9b5bdd0084cc23.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-8267e90745dfb882.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},u.__BUILD_MANIFEST.lowPriorityFiles=["/static/5A9E8b1EJTvgxPSBSSfvq/_buildManifest.js",,"/static/5A9E8b1EJTvgxPSBSSfvq/_ssgManifest.js"],u.__REACT_LOADABLE_MANIFEST=ht,u.__NEXT_FONT_MANIFEST=pt,u.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var x={},E={};function _(t){var s=E[t];if(s!==void 0)return s.exports;var n=E[t]={exports:{}},l=!0;try{x[t].call(n.exports,n,n.exports,_),l=!1}finally{l&&delete E[t]}return n.exports}_.m=x,_.amdO={},(()=>{var t=[];_.O=(s,n,l,f)=>{if(n){f=f||0;for(var p=t.length;p>0&&t[p-1][2]>f;p--)t[p]=t[p-1];t[p]=[n,l,f];return}for(var c=1/0,p=0;p<t.length;p++){for(var[n,l,f]=t[p],b=!0,N=0;N<n.length;N++)c>=f&&Object.keys(_.O).every(R=>_.O[R](n[N]))?n.splice(N--,1):(b=!1,f<c&&(c=f));if(b){t.splice(p--,1);var P=l();P!==void 0&&(s=P)}}return s}})(),_.n=t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return _.d(s,{a:s}),s},(()=>{var t,s=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__;_.t=function(n,l){if(1&l&&(n=this(n)),8&l||typeof n=="object"&&n&&(4&l&&n.__esModule||16&l&&typeof n.then=="function"))return n;var f=Object.create(null);_.r(f);var p={};t=t||[null,s({}),s([]),s(s)];for(var c=2&l&&n;typeof c=="object"&&!~t.indexOf(c);c=s(c))Object.getOwnPropertyNames(c).forEach(b=>p[b]=()=>n[b]);return p.default=()=>n,_.d(f,p),f}})(),_.d=(t,s)=>{for(var n in s)_.o(s,n)&&!_.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},_.e=()=>Promise.resolve(),_.g=function(){if(typeof k=="object")return k;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),_.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),_.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={993:0};_.O.j=l=>t[l]===0;var s=(l,f)=>{var p,c,[b,N,P]=f,w=0;if(b.some(L=>t[L]!==0)){for(p in N)_.o(N,p)&&(_.m[p]=N[p]);if(P)var j=P(_)}for(l&&l(f);w<b.length;w++)c=b[w],_.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return _.O(j)},n=u.webpackChunk_N_E=u.webpackChunk_N_E||[];n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n))})(),_.nc=void 0})(),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[467],{676:it,8819:ut,9642:ot,5105:ct,1651:st,796:at,8949:rt,7908:_t,1583:nt,8264:tt,4363:et,6202:Ve,5927:Qe,828:Je,4828:Ze,6631:ze,8816:Ye,6991:We,3665:Xe,8042:Ge,6776:qe,4101:He,2296:Be,5228:ke,5303:he,7322:Ke,5558:pe,5405:Me}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[805],{4337:Ue,5996:Le,7960:Fe,6914:De,9548:$e,5028:Te,2039:Se,2988:Ce,2561:Re,5234:je,932:we,4591:Ae,7444:Oe,662:Ie,7701:Pe,9573:Ne,3039:ve,1863:ye,5577:be,7037:Ee,3818:xe,1730:me}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[933],{4155:fe,9985:ge,1175:de}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[210],{2067:ie,6195:ue,4841:(x,E,_)=>{"use strict";_.r(E),_.d(E,{ComponentMod:()=>H,default:()=>q});var t={};_.r(t),_.d(t,{GET:()=>N});var s={};_.r(s),_.d(s,{originalPathname:()=>K,patchFetch:()=>B,requestAsyncStorage:()=>L,routeModule:()=>j,serverHooks:()=>R,staticGenerationAsyncStorage:()=>D});var n=_(932),l=_(2561),f=_(4828),p=_(6631),c=_(9985),b=_(1175);async function N(C,{params:S}){let d=S.taskId,y=new URL(C.url).searchParams.get("model")||"wanx";if(!d)return c.xk.json({success:!1,error:"Task ID is required"},{status:400});try{return y==="wanx"?await P(d):y==="flux"?await w(d):c.xk.json({success:!1,error:`Unsupported model: ${y}`},{status:400})}catch(m){return console.error(`Error checking task status for ${d}:`,m),console.error("Error details:",m.response?.data||m.message),c.xk.json({success:!1,error:m.response?.data?.message||m.message||"Failed to check task status"},{status:500})}}async function P(C){if(!process.env.DASHSCOPE_API_KEY)return console.error("DASHSCOPE_API_KEY environment variable is not set"),c.xk.json({success:!1,error:"API key is not configured"},{status:500});let S=`https://dashscope.aliyuncs.com/api/v1/tasks/${C}`,d=(await b.Z.get(S,{headers:{Authorization:`Bearer ${process.env.DASHSCOPE_API_KEY}`,Accept:"application/json"}})).data,{task_status:y,results:m}=d.output;if(y==="SUCCEEDED"){let e=m.map(o=>o.url).filter(Boolean);return c.xk.json({success:!0,status:"SUCCEEDED",imageUrl:e[0],images:e})}return y==="FAILED"?c.xk.json({success:!1,status:"FAILED",error:d.output.message||"Image generation task failed"},{status:500}):c.xk.json({success:!0,status:y})}async function w(C){if(!process.env.REPLICATE_API_TOKEN)return console.error("REPLICATE_API_TOKEN environment variable is not set"),c.xk.json({success:!1,error:"Replicate API token is not configured"},{status:500});let S=`https://api.replicate.com/v1/predictions/${C}`,d=(await b.Z.get(S,{headers:{Authorization:`Token ${process.env.REPLICATE_API_TOKEN}`,Accept:"application/json"}})).data;if(d.status==="succeeded"){let y=Array.isArray(d.output)?d.output:[];return c.xk.json({success:!0,status:"SUCCEEDED",imageUrl:y[0],images:y})}if(d.status==="failed")return c.xk.json({success:!1,status:"FAILED",error:d.error||"Replicate image generation failed"},{status:500});{let y=d.status==="processing"?"RUNNING":"PENDING";return c.xk.json({success:!0,status:y})}}let j=new l.AppRouteRouteModule({definition:{kind:f.x.APP_ROUTE,page:"/api/generate-image/status/[taskId]/route",pathname:"/api/generate-image/status/[taskId]",filename:"route",bundlePath:"app/api/generate-image/status/[taskId]/route"},resolvedPagePath:"/Users/nasirann/Documents/GitHub/recipe-easy/app/api/generate-image/status/[taskId]/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:L,staticGenerationAsyncStorage:D,serverHooks:R}=j,K="/api/generate-image/status/[taskId]/route";function B(){return(0,p.XH)({serverHooks:R,staticGenerationAsyncStorage:D})}let H=s,q=n.a.wrap(j)}},x=>{var E=t=>x(x.s=t);x.O(0,[467,805,933],()=>E(4841));var _=x.O();(k._ENTRIES=typeof k._ENTRIES>"u"?{}:k._ENTRIES)["middleware_app/api/generate-image/status/[taskId]/route"]=_}]),function(){let x={exports:{},loaded:!1};return function(_,t){var s=Object.create,n=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,p=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,b=e=>n(e,"__esModule",{value:!0}),N=(e,o)=>{b(e);for(var a in o)n(e,a,{get:o[a],enumerable:!0})},P=(e,o,a)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of f(o))!c.call(e,r)&&r!=="default"&&n(e,r,{get:()=>o[r],enumerable:!(a=l(o,r))||a.enumerable});return e},w=e=>P(b(n(e!=null?s(p(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);N(t,{default:()=>S});var j=w((z(),ne(U))),L="@next/request-context",D=Symbol.for(L),R=Symbol.for("internal.storage");function K(){let e=k;if(!e[D]){let o=new j.AsyncLocalStorage,a={get:()=>o.getStore(),[R]:o};e[D]=a}return e[D]}var B=K();function H(e,o){return B[R].run(e,o)}function q(e){let o={};return e&&e.forEach((a,r)=>{o[r]=a,r.toLowerCase()==="set-cookie"&&(o[r]=C(a))}),o}function C(e){let o=[],a=0,r,I,v,T,$;function O(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}function A(){return I=e.charAt(a),I!=="="&&I!==";"&&I!==","}for(;a<e.length;){for(r=a,$=!1;O();)if(I=e.charAt(a),I===","){for(v=a,a+=1,O(),T=a;a<e.length&&A();)a+=1;a<e.length&&e.charAt(a)==="="?($=!0,a=T,o.push(e.substring(r,v)),r=a):a=v+1}else a+=1;(!$||a>=e.length)&&o.push(e.substring(r,e.length))}return o}function S(e){let o=e.staticRoutes.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page})),a=e.dynamicRoutes?.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page}))||[];return async function(r,I){let v=new URL(r.url).pathname,T={};if(e.nextConfig?.basePath&&v.startsWith(e.nextConfig.basePath)&&(v=v.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let O of e.nextConfig.i18n.locales){let A=new RegExp(`^/${O}($|/)`,"i");if(v.match(A)){v=v.replace(A,"/")||"/";break}}for(let O of o)if(O.regexp.exec(v)){T.name=O.page;break}if(!T.name){let O=y(v);for(let A of a||[]){if(O&&!y(A.page))continue;let W=A.regexp.exec(v);if(W){T={name:A.page,params:W.groups};break}}}let $=await H({waitUntil:I.waitUntil},()=>k._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:r.url,method:r.method,headers:q(r.headers),ip:d(r.headers,m.Ip),geo:{city:d(r.headers,m.City,!0),country:d(r.headers,m.Country,!0),latitude:d(r.headers,m.Latitude),longitude:d(r.headers,m.Longitude),region:d(r.headers,m.Region,!0)},nextConfig:e.nextConfig,page:T,body:r.body}}));return $.waitUntil&&I.waitUntil($.waitUntil),$.response}}function d(e,o,a=!1){let r=e.get(o)||void 0;return a&&r?decodeURIComponent(r):r}function y(e){return e==="/api"||e.startsWith("/api/")}var m;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(m||(m={}))}(x,x.exports),x.exports}.call({}).default({name:"app/api/generate-image/status/[taskId]/route",staticRoutes:[{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/auth",regex:"^/auth(?:/)?$",routeKeys:{},namedRegex:"^/auth(?:/)?$"},{page:"/auth/callback",regex:"^/auth/callback(?:/)?$",routeKeys:{},namedRegex:"^/auth/callback(?:/)?$"},{page:"/robots.txt",regex:"^/robots\\.txt(?:/)?$",routeKeys:{},namedRegex:"^/robots\\.txt(?:/)?$"},{page:"/sitemap.xml",regex:"^/sitemap\\.xml(?:/)?$",routeKeys:{},namedRegex:"^/sitemap\\.xml(?:/)?$"}],dynamicRoutes:[{page:"/api/generate-image/status/[taskId]",regex:"^/api/generate\\-image/status/([^/]+?)(?:/)?$",routeKeys:{nxtPtaskId:"nxtPtaskId"},namedRegex:"^/api/generate\\-image/status/(?<nxtPtaskId>[^/]+?)(?:/)?$"},{page:"/api/recipes/[id]",regex:"^/api/recipes/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/recipes/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/[locale]",regex:"^/([^/]+?)(?:/)?$",routeKeys:{nxtPlocale:"nxtPlocale"},namedRegex:"^/(?<nxtPlocale>[^/]+?)(?:/)?$"},{page:"/[locale]/privacy",regex:"^/([^/]+?)/privacy(?:/)?$",routeKeys:{nxtPlocale:"nxtPlocale"},namedRegex:"^/(?<nxtPlocale>[^/]+?)/privacy(?:/)?$"},{page:"/[locale]/terms",regex:"^/([^/]+?)/terms(?:/)?$",routeKeys:{nxtPlocale:"nxtPlocale"},namedRegex:"^/(?<nxtPlocale>[^/]+?)/terms(?:/)?$"}],nextConfig:{basePath:""}})))(g,g,g);export{bt as default};
