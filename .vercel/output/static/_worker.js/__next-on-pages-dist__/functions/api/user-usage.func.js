var J=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var ee=Object.prototype.hasOwnProperty;var te=(s,k)=>()=>(s&&(k=s(s=0)),k);var G=(s,k,L,f)=>{if(k&&typeof k=="object"||typeof k=="function")for(let m of Z(k))!ee.call(s,m)&&m!==L&&J(s,m,{get:()=>k[m],enumerable:!(f=Y(k,m))||f.enumerable});return s},X=(s,k,L)=>(G(s,k,"default"),L&&G(L,k,"default"));var ne=s=>G(J({},"__esModule",{value:!0}),s);var D={};import*as pt from"async_hooks";var z=te(()=>{X(D,pt)});import{__getNamedExports as _e}from"../../../__next-on-pages-dist__/webpack/1d2470119d4f846d0a077893f2422c32.js";import{__getNamedExports as re}from"../../../__next-on-pages-dist__/webpack/26df63ef8f6dd468813d90c00f151653.js";import{__getNamedExports as oe}from"../../../__next-on-pages-dist__/webpack/73a23316e6943b71c3775abd2b4c802e.js";import{__getNamedExports as ae}from"../../../__next-on-pages-dist__/webpack/7f9c4cac928c3718390c1c777cb83bc3.js";import{__getNamedExports as ce}from"../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var g=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/user-usage"),Q=_e(g,g,g),se=Q.__chunk_9985,ue=Q.__chunk_4155,K=re(g,g,g),ie=K.__chunk_6195,pe=K.__chunk_2067,he=K.__chunk_5558,ke=K.__chunk_5303,de=K.__chunk_5228,h=oe(g,g,g),le=h.__chunk_1730,ge=h.__chunk_3818,fe=h.__chunk_7037,me=h.__chunk_5577,xe=h.__chunk_1863,be=h.__chunk_3039,ye=h.__chunk_9573,Ee=h.__chunk_7701,ve=h.__chunk_662,we=h.__chunk_7444,Oe=h.__chunk_4591,Pe=h.__chunk_932,Ne=h.__chunk_5234,Re=h.__chunk_2561,je=h.__chunk_2988,Ie=h.__chunk_2039,Ae=h.__chunk_5028,Te=h.__chunk_9548,Se=h.__chunk_6914,Ce=h.__chunk_7960,$e=h.__chunk_5996,Fe=h.__chunk_4337,u=ae(g,g,g),Le=u.__chunk_5405,Me=u.__chunk_7322,Ue=u.__chunk_2296,De=u.__chunk_4101,Ke=u.__chunk_6776,qe=u.__chunk_8042,Be=u.__chunk_3665,He=u.__chunk_6991,Ge=u.__chunk_8816,Xe=u.__chunk_6631,We=u.__chunk_4828,Je=u.__chunk_828,ze=u.__chunk_5927,Qe=u.__chunk_6202,Ve=u.__chunk_4363,Ye=u.__chunk_8264,Ze=u.__chunk_1583,et=u.__chunk_7908,tt=u.__chunk_8949,nt=u.__chunk_796,_t=u.__chunk_1651,rt=u.__chunk_5105,ot=u.__chunk_9642,at=u.__chunk_8819,ct=u.__chunk_676,V=ce(g,g,g),st=V.__NEXT_FONT_MANIFEST,ut=V.__REACT_LOADABLE_MANIFEST,ft=((s,k,L)=>(k._ENTRIES={},s.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-ab9b5bdd0084cc23.js","static/chunks/fd9d1056-b6bd4111191f2b98.js","static/chunks/30-831c6f736de22b6a.js","static/chunks/main-app-197e90683a538661.js"],pages:{"/_app":["static/chunks/webpack-ab9b5bdd0084cc23.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-8267e90745dfb882.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-ab9b5bdd0084cc23.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-8267e90745dfb882.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},s.__BUILD_MANIFEST.lowPriorityFiles=["/static/BpuWLeOEEi_d4YQ-ipc4f/_buildManifest.js",,"/static/BpuWLeOEEi_d4YQ-ipc4f/_ssgManifest.js"],s.__REACT_LOADABLE_MANIFEST=ut,s.__NEXT_FONT_MANIFEST=st,s.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var f={},m={};function _(t){var a=m[t];if(a!==void 0)return a.exports;var n=m[t]={exports:{}},d=!0;try{f[t].call(n.exports,n,n.exports,_),d=!1}finally{d&&delete m[t]}return n.exports}_.m=f,_.amdO={},(()=>{var t=[];_.O=(a,n,d,l)=>{if(n){l=l||0;for(var i=t.length;i>0&&t[i-1][2]>l;i--)t[i]=t[i-1];t[i]=[n,d,l];return}for(var p=1/0,i=0;i<t.length;i++){for(var[n,d,l]=t[i],b=!0,E=0;E<n.length;E++)p>=l&&Object.keys(_.O).every(F=>_.O[F](n[E]))?n.splice(E--,1):(b=!1,l<p&&(p=l));if(b){t.splice(i--,1);var P=d();P!==void 0&&(a=P)}}return a}})(),_.n=t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return _.d(a,{a}),a},(()=>{var t,a=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__;_.t=function(n,d){if(1&d&&(n=this(n)),8&d||typeof n=="object"&&n&&(4&d&&n.__esModule||16&d&&typeof n.then=="function"))return n;var l=Object.create(null);_.r(l);var i={};t=t||[null,a({}),a([]),a(a)];for(var p=2&d&&n;typeof p=="object"&&!~t.indexOf(p);p=a(p))Object.getOwnPropertyNames(p).forEach(b=>i[b]=()=>n[b]);return i.default=()=>n,_.d(l,i),l}})(),_.d=(t,a)=>{for(var n in a)_.o(a,n)&&!_.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},_.e=()=>Promise.resolve(),_.g=function(){if(typeof k=="object")return k;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),_.o=(t,a)=>Object.prototype.hasOwnProperty.call(t,a),_.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={993:0};_.O.j=d=>t[d]===0;var a=(d,l)=>{var i,p,[b,E,P]=l,N=0;if(b.some(C=>t[C]!==0)){for(i in E)_.o(E,i)&&(_.m[i]=E[i]);if(P)var M=P(_)}for(d&&d(l);N<b.length;N++)p=b[N],_.o(t,p)&&t[p]&&t[p][0](),t[p]=0;return _.O(M)},n=s.webpackChunk_N_E=s.webpackChunk_N_E||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))})(),_.nc=void 0})(),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[467],{676:ct,8819:at,9642:ot,5105:rt,1651:_t,796:nt,8949:tt,7908:et,1583:Ze,8264:Ye,4363:Ve,6202:Qe,5927:ze,828:Je,4828:We,6631:Xe,8816:Ge,6991:He,3665:Be,8042:qe,6776:Ke,4101:De,2296:Ue,5228:de,5303:ke,7322:Me,5558:he,5405:Le}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[805],{4337:Fe,5996:$e,7960:Ce,6914:Se,9548:Te,5028:Ae,2039:Ie,2988:je,2561:Re,5234:Ne,932:Pe,4591:Oe,7444:we,662:ve,7701:Ee,9573:ye,3039:be,1863:xe,5577:me,7037:fe,3818:ge,1730:le}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[948],{2067:pe,6195:ie,8747:(f,m,_)=>{"use strict";_.r(m),_.d(m,{ComponentMod:()=>B,default:()=>H});var t={};_.r(t),_.d(t,{GET:()=>E,POST:()=>P,runtime:()=>b});var a={};_.r(a),_.d(a,{originalPathname:()=>F,patchFetch:()=>q,requestAsyncStorage:()=>M,routeModule:()=>N,serverHooks:()=>$,staticGenerationAsyncStorage:()=>C});var n=_(932),d=_(2561),l=_(4828),i=_(6631),p=_(9985);let b="edge";async function E(U){try{let{searchParams:x}=new URL(U.url),w=x.get("userId"),O=x.get("isAdmin")==="true";if(!w)return p.xk.json({error:"User ID is required"},{status:400});let I=new URLSearchParams;I.append("userId",w),O&&I.append("isAdmin","true");let v=process.env.WORKER_URL||"https://recipe-easy.annnb016.workers.dev",e=await fetch(`${v}/api/user-usage?${I}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let c=await e.json();return p.xk.json(c)}catch(x){console.error("API Error:",x);let w=x instanceof Error?x.message:"An unknown error occurred";return p.xk.json({error:"Failed to process request",details:w},{status:500})}}async function P(U){try{let{userId:x,action:w,amount:O,description:I}=await U.json();if(!x)return p.xk.json({error:"User ID is required"},{status:400});let v=process.env.WORKER_URL||"https://recipe-easy.annnb016.workers.dev",e=await fetch(`${v}/api/user-usage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:x,action:w,amount:O,description:I})});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let c=await e.json();return p.xk.json(c)}catch(x){console.error("API Error:",x);let w=x instanceof Error?x.message:"An unknown error occurred";return p.xk.json({error:"Failed to process request",details:w},{status:500})}}let N=new d.AppRouteRouteModule({definition:{kind:l.x.APP_ROUTE,page:"/api/user-usage/route",pathname:"/api/user-usage",filename:"route",bundlePath:"app/api/user-usage/route"},resolvedPagePath:"/Users/nasirann/Documents/GitHub/recipe-easy/app/api/user-usage/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:M,staticGenerationAsyncStorage:C,serverHooks:$}=N,F="/api/user-usage/route";function q(){return(0,i.XH)({serverHooks:$,staticGenerationAsyncStorage:C})}let B=a,H=n.a.wrap(N)},4155:ue,9985:se},f=>{var m=t=>f(f.s=t);f.O(0,[467,805],()=>m(8747));var _=f.O();(k._ENTRIES=typeof k._ENTRIES>"u"?{}:k._ENTRIES)["middleware_app/api/user-usage/route"]=_}]),function(){let f={exports:{},loaded:!1};return function(_,t){var a=Object.create,n=Object.defineProperty,d=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,i=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,b=e=>n(e,"__esModule",{value:!0}),E=(e,c)=>{b(e);for(var o in c)n(e,o,{get:c[o],enumerable:!0})},P=(e,c,o)=>{if(c&&typeof c=="object"||typeof c=="function")for(let r of l(c))!p.call(e,r)&&r!=="default"&&n(e,r,{get:()=>c[r],enumerable:!(o=d(c,r))||o.enumerable});return e},N=e=>P(b(n(e!=null?a(i(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);E(t,{default:()=>w});var M=N((z(),ne(D))),C="@next/request-context",$=Symbol.for(C),F=Symbol.for("internal.storage");function q(){let e=k;if(!e[$]){let c=new M.AsyncLocalStorage,o={get:()=>c.getStore(),[F]:c};e[$]=o}return e[$]}var B=q();function H(e,c){return B[F].run(e,c)}function U(e){let c={};return e&&e.forEach((o,r)=>{c[r]=o,r.toLowerCase()==="set-cookie"&&(c[r]=x(o))}),c}function x(e){let c=[],o=0,r,R,y,T,S;function j(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}function A(){return R=e.charAt(o),R!=="="&&R!==";"&&R!==","}for(;o<e.length;){for(r=o,S=!1;j();)if(R=e.charAt(o),R===","){for(y=o,o+=1,j(),T=o;o<e.length&&A();)o+=1;o<e.length&&e.charAt(o)==="="?(S=!0,o=T,c.push(e.substring(r,y)),r=o):o=y+1}else o+=1;(!S||o>=e.length)&&c.push(e.substring(r,e.length))}return c}function w(e){let c=e.staticRoutes.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page})),o=e.dynamicRoutes?.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page}))||[];return async function(r,R){let y=new URL(r.url).pathname,T={};if(e.nextConfig?.basePath&&y.startsWith(e.nextConfig.basePath)&&(y=y.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let j of e.nextConfig.i18n.locales){let A=new RegExp(`^/${j}($|/)`,"i");if(y.match(A)){y=y.replace(A,"/")||"/";break}}for(let j of c)if(j.regexp.exec(y)){T.name=j.page;break}if(!T.name){let j=I(y);for(let A of o||[]){if(j&&!I(A.page))continue;let W=A.regexp.exec(y);if(W){T={name:A.page,params:W.groups};break}}}let S=await H({waitUntil:R.waitUntil},()=>k._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:r.url,method:r.method,headers:U(r.headers),ip:O(r.headers,v.Ip),geo:{city:O(r.headers,v.City,!0),country:O(r.headers,v.Country,!0),latitude:O(r.headers,v.Latitude),longitude:O(r.headers,v.Longitude),region:O(r.headers,v.Region,!0)},nextConfig:e.nextConfig,page:T,body:r.body}}));return S.waitUntil&&R.waitUntil(S.waitUntil),S.response}}function O(e,c,o=!1){let r=e.get(c)||void 0;return o&&r?decodeURIComponent(r):r}function I(e){return e==="/api"||e.startsWith("/api/")}var v;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(v||(v={}))}(f,f.exports),f.exports}.call({}).default({name:"app/api/user-usage/route",staticRoutes:[{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/auth",regex:"^/auth(?:/)?$",routeKeys:{},namedRegex:"^/auth(?:/)?$"},{page:"/auth/callback",regex:"^/auth/callback(?:/)?$",routeKeys:{},namedRegex:"^/auth/callback(?:/)?$"},{page:"/robots.txt",regex:"^/robots\\.txt(?:/)?$",routeKeys:{},namedRegex:"^/robots\\.txt(?:/)?$"},{page:"/sitemap.xml",regex:"^/sitemap\\.xml(?:/)?$",routeKeys:{},namedRegex:"^/sitemap\\.xml(?:/)?$"}],dynamicRoutes:[{page:"/api/generate-image/status/[taskId]",regex:"^/api/generate\\-image/status/([^/]+?)(?:/)?$",routeKeys:{nxtPtaskId:"nxtPtaskId"},namedRegex:"^/api/generate\\-image/status/(?<nxtPtaskId>[^/]+?)(?:/)?$"},{page:"/api/recipes/[id]",regex:"^/api/recipes/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/recipes/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/[locale]",regex:"^/([^/]+?)(?:/)?$",routeKeys:{nxtPlocale:"nxtPlocale"},namedRegex:"^/(?<nxtPlocale>[^/]+?)(?:/)?$"},{page:"/[locale]/privacy",regex:"^/([^/]+?)/privacy(?:/)?$",routeKeys:{nxtPlocale:"nxtPlocale"},namedRegex:"^/(?<nxtPlocale>[^/]+?)/privacy(?:/)?$"},{page:"/[locale]/terms",regex:"^/([^/]+?)/terms(?:/)?$",routeKeys:{nxtPlocale:"nxtPlocale"},namedRegex:"^/(?<nxtPlocale>[^/]+?)/terms(?:/)?$"}],nextConfig:{basePath:""}})))(g,g,g);export{ft as default};
